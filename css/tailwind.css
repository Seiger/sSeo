@import "tailwindcss";
@import "./theme.css";
@config "./tailwind.config.js";
@custom-variant darkness (&:where(.darkness, .darkness *));

@layer base {
    html {
        font-family: var(--font-sans, ui-sans-serif, system-ui, -apple-system, Segoe UI, Inter, Roboto);
    }
    body {
        font-size: var(--text-base-size);
        line-height: var(--leading-base);
        background: var(--bg-color);
        color: var(--text-color);
    }
    h1, h2, h3, h4 {
        line-height: var(--leading-head);
        color: var(--heading-color);
    }
    .muted, .text-muted {
        color: var(--text-muted);
    }
}

@layer components {
    .s-document {
        @apply flex min-h-screen font-sans;
        background-color: var(--bg-color, #f1f5f9);
        color: var(--text-color, #1d293d);
        transition: var(--theme-transition);
    }
    .s-tooltip {
        @apply max-w-xs bg-white text-sm text-slate-800 p-3 rounded-xl shadow-xl border border-slate-200;
        @apply darkness:bg-slate-800 darkness:text-white darkness:border-slate-600;
    }
    .s-brand {
        @apply fixed bottom-3 right-3 z-50 flex items-center gap-2 bg-white/80 backdrop-blur rounded-full shadow-lg
            overflow-hidden transition-[width,padding] duration-300 ease-in-out;
        width : 2.5rem;
    }
    .s-brand--open {
        @apply pl-3 pr-4;
        width : 11rem;
    }
    .s-brand-logo {@apply w-10 h-10 flex items-center justify-center shrink-0;}
    .s-brand-text {@apply text-sm leading-tight text-slate-700 whitespace-nowrap;}
    .s-brand-link {@apply text-blue-600 hover:underline;}

    /* Aside */
    .s-nav {
        @apply fixed inset-y-0 z-40 flex flex-col bg-gradient-to-b from-[#0f2645] to-[#113c6E] text-slate-100
            transition-all duration-300;
    }
    .s-nav-header {
        @apply flex items-center justify-center h-16 shrink-0 sticky top-0 bg-inherit z-10;
    }
    .s-nav-menu {
        @apply flex-1 overflow-y-auto mt-4 space-y-1 pr-1;
        scrollbar-width: thin;
        scrollbar-color: rgba(255,255,255,.2) transparent;
    }
    .s-nav-menu::-webkit-scrollbar {
        width: 6px;
    }
    .s-nav-menu::-webkit-scrollbar-thumb {
        background: rgba(255,255,255,.2);
        border-radius: 3px;
    }
    .s-nav-menu-item {
        @apply relative flex items-center gap-3 pl-4 pr-2 py-2 text-sm hover:bg-white/10 transition;
    }
    .s-nav-menu-item--active {
        @apply bg-[#0051c7]/50 border-l-[3px] border-[#3b82f6] hover:bg-[#0051c7]/50;
    }
    .s-pro-badge {
        @apply px-2 py-0.5 text-[10px] leading-none uppercase bg-violet-600 text-white rounded-full;
    }
    .s-pin-btn {
        @apply fixed bottom-4 z-50 flex items-center justify-center w-8 h-8 rounded-full hover:bg-white/10
            focus:outline-none focus:ring-2 focus:ring-white/40;
    }

    /* Header */
    .s-header {
        @apply sticky top-0 h-12 bg-white/80 backdrop-blur flex items-center justify-between gap-3 px-6 shadow;
        @apply darkness:bg-black/80;
    }
    .s-header-title {
        @apply text-xl font-semibold text-slate-800;
        @apply darkness:text-white;
    }

    /* Buttons */
    .s-btn {
        @apply flex items-center justify-center gap-1 px-3 py-1 rounded-lg shadow text-sm font-medium transition-colors
            duration-150;
    }
    .s-btn--primary {
        @apply bg-[#3B82F6] text-white hover:bg-[#306ee0];
    }
    .s-btn--success {
        @apply bg-emerald-600 text-white hover:bg-emerald-700;
    }
    .s-btn--danger {
        @apply bg-red-600/90 text-white hover:bg-red-700;
    }

    /* Inputs */
    .s-toggle-slider {
        @apply relative w-11 h-6 rounded-full bg-gray-200 transition-colors;
    }
    .darkness .s-toggle-slider {
        @apply bg-slate-700;
    }
    .s-toggle-slider::after {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        width: 20px;
        height: 20px;
        background-color: white;
        border: 1px solid #d1d5db;
        border-radius: 9999px;
        transition: transform 0.3s ease-in-out;
    }
    .darkness .s-toggle-slider::after {
        border-color: #4b5563;
    }
    input[type="checkbox"].peer:checked + .s-toggle-slider {
        @apply bg-green-600;
    }
    .darkness input[type="checkbox"].peer:checked + .s-toggle-slider {
        @apply bg-green-600;
    }
    input[type="checkbox"].peer:checked + .s-toggle-slider::after {
        transform: translateX(100%);
    }

    /* Search */
    .s-input-search {
        @apply w-32 group-hover:w-64 focus:w-64 bg-slate-200 text-sm rounded-lg pl-8 pr-3 py-1 placeholder-slate-500
            border border-transparent focus:outline-none focus:border-slate-400 transition-all duration-300;
        @apply darkness:bg-slate-700 darkness:placeholder-slate-300 darkness:focus:border-slate-500;
    }

    /* Widget */
    .s-widget {
        @apply flex flex-col rounded-2xl shadow bg-gradient-to-br from-white to-slate-50 p-6 border border-slate-200;
        @apply darkness:from-[#002e63] darkness:to-[#0051c7] darkness:border-transparent;
    }
    .s-widget-name {
        @apply text-sm font-medium text-slate-600 leading-tight;
        @apply darkness:text-white/90;
    }
    .s-alert {
        @apply mx-6 mt-3 mb-0 flex items-start gap-3 rounded-xl p-4 text-sm border;
    }
    .s-alert--danger {
        @apply bg-red-100 text-red-800 border-red-200;
        @apply darkness:bg-red-800/20 darkness:text-red-200 darkness:border-red-600/30;
    }
    .s-alert--icon-danger {
        @apply w-5 h-5 mt-0.5 text-red-600 darkness:text-red-300;
        @apply darkness:text-red-300;
    }

    /* Meta Templates */
    .s-meta-block-btn {
        @apply w-full flex items-center justify-between px-6 py-4 bg-sky-100 hover:bg-sky-200 transition-all
            cursor-pointer select-none;
        @apply darkness:text-slate-200 darkness:bg-[#132a44] darkness:hover:bg-[#1a2f44];
    }
    .s-meta-block-content {
        @apply bg-white text-slate-700 divide-y divide-slate-100 overflow-hidden transition-[max-height] duration-500 ease-in-out h-fit;
        @apply darkness:text-slate-200 darkness:bg-[#122739] darkness:divide-slate-600;
    }
    .placeholder {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        color: #38bdf8;
        text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);
    }

    /* AlertifyJS */
    .alertify .ajs-dialog {
        @apply text-slate-800 rounded-xl shadow-xl p-6 border border-slate-200 w-full max-w-lg;
        @apply darkness:!bg-[#0f2645] darkness:text-white darkness:border-slate-700;
    }
    .alertify .ajs-header {
        @apply darkness:!bg-[#0f2645];
        margin-left: -16px !important;
        margin-right: -16px !important;
    }
    .alertify .ajs-body {
        @apply text-sm text-slate-700;
        @apply darkness:text-slate-300;
    }
    .alertify .ajs-body .ajs-content {
        padding: 0 !important;
    }
    .alertify .ajs-footer {
        @apply mt-6 flex justify-end gap-3;
        @apply darkness:!bg-[#0f2645];
        margin-left: -16px !important;
        margin-right: -16px !important;
    }
    .alertify-notifier .ajs-message {
        @apply bg-blue-400 text-white text-sm font-medium px-4 py-2 rounded-xl shadow-xl flex items-center justify-center text-center;
        max-width: 320px;
        min-height: 2.5rem;
        z-index: 99999 !important;
        animation: fadeInUp 0.3s ease-out;
        line-height: 1.4;
    }
    .alertify-notifier .ajs-message.ajs-error   { @apply bg-red-600 darkness:bg-red-700; }
    .alertify-notifier .ajs-message.ajs-success { @apply bg-green-600 darkness:bg-green-700; }
    .alertify-notifier .ajs-message.ajs-notify  { @apply bg-sky-600 darkness:bg-sky-700; }
    .alertify-notifier .ajs-message.ajs-warning { @apply bg-yellow-500 text-black darkness:bg-yellow-600; }
    @keyframes slideInUp {
        from {opacity: 0; transform: translateY(10px);}
        to {opacity: 1;  transform: translateY(0);}
    }
    .alertify h3 {
        @apply text-lg font-semibold text-slate-800;
        @apply darkness:text-slate-100;
    }
    .alertify .ajs-button {
        @apply px-4 py-1.5 rounded-lg text-sm font-medium shadow transition;
    }
    .alertify .ajs-ok {
        @apply bg-blue-600 text-white hover:bg-blue-700;
    }
    .alertify .ajs-cancel {
        @apply bg-slate-200 text-slate-800 hover:bg-slate-300;
        @apply darkness:bg-slate-700 darkness:text-white darkness:hover:bg-slate-600;
    }

    /* CodeMirror */
    .CodeMirror {
        @apply border border-slate-700 rounded-md w-full overflow-hidden;
    }
    .CodeMirror-scroll {
        @apply overflow-x-auto;
    }
    .darkness .CodeMirror-gutters {
        background-color: #1e232b !important;
    }
}